<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Atelier OLDA | Production</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; background-color: #fbfbfd; color: #1d1d1f; -webkit-font-smoothing: antialiased; }
        .apple-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: saturate(180%) blur(20px); border-radius: 28px; border: 1px solid rgba(0,0,0,0.05); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .input-apple { background: #ffffff; border: 1.5px solid #d2d2d7; border-radius: 14px; padding: 12px; width: 100%; font-size: 15px; outline: none; transition: all 0.2s; }
        .input-apple:focus { border-color: #0071e3; box-shadow: 0 0 0 4px rgba(0,113,227,0.1); }
        
        /* Familles Pastel */
        .famille-tshirt { background-color: #f0f4ff; border-left: 10px solid #5e5ce6; }
        .famille-pochette { background-color: #fff0f6; border-left: 10px solid #ff2d55; }
        .famille-tasse { background-color: #f2f2f7; border-left: 10px solid #8e8e93; }
        .famille-urgent { background-color: #ff3b30 !important; border-left: 10px solid #000 !important; color: white !important; }
        .famille-urgent p, .famille-urgent span { color: white !important; opacity: 0.9; }

        .logo-selector { border: 2px dashed #d2d2d7; border-radius: 12px; cursor: pointer; transition: all 0.2s; }
        .logo-selector:hover { border-color: #0071e3; background: #f5faff; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="flex justify-between items-start mb-8 px-2">
            <div>
                <h1 class="text-4xl font-black tracking-tighter text-black">Atelier <span class="text-blue-600">OLDA</span></h1>
                <p class="text-gray-400 font-bold text-xs uppercase tracking-[0.2em]">Saint-Martin Management</p>
            </div>
            <button onclick="toggleUrgency()" id="urgentBtn" class="bg-gray-200 text-[10px] font-black px-4 py-2 rounded-full hover:bg-red-600 hover:text-white transition-all uppercase tracking-widest">
                Urgence : OFF
            </button>
        </header>

        <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
            
            <div class="xl:col-span-4">
                <div class="apple-card p-6 shadow-2xl border-t-4 border-blue-500">
                    <form id="orderForm" class="space-y-4">
                        <div class="grid grid-cols-2 gap-3">
                            <div class="col-span-2">
                                <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Nom Client</label>
                                <input type="text" id="client" class="input-apple" placeholder="M√©lina, qui est le client ?" required>
                            </div>
                            <div class="col-span-2">
                                <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Num√©ro de t√©l√©phone</label>
                                <input type="tel" id="phone" class="input-apple" placeholder="06 90...">
                            </div>
                            <div>
                                <label class="text-[10px] font-black text-gray-400 uppercase ml-1">R√©f OLDA</label>
                                <input type="text" id="ref" class="input-apple" placeholder="ex: V-Neck">
                            </div>
                            <div>
                                <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Couleur</label>
                                <input type="text" id="color" class="input-apple" placeholder="ex: Blanc">
                            </div>
                        </div>

                        <div>
                            <label class="text-[10px] font-black text-gray-400 uppercase ml-1">Famille de produit</label>
                            <select id="type" class="input-apple font-bold text-blue-600 mt-1">
                                <option value="tshirt">üëï T-shirt</option>
                                <option value="pochette">üëù Pochette</option>
                                <option value="tasse">‚òï Tasse</option>
                                <option value="portecle">üîë Porte-cl√©s</option>
                                <option value="magnet">üß≤ Magnet</option>
                                <option value="autre">üì¶ Autre produit</option>
                                <option value="atelier">üõ†Ô∏è Demande Atelier</option>
                                <option value="loic">üëë Demande Lo√Øc</option>
                            </select>
                        </div>

                        <div class="p-4 bg-gray-50 rounded-2xl border border-gray-100">
                            <p class="text-[10px] font-black text-gray-400 uppercase mb-3 text-center">Emplacements Marquage</p>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="logo-selector p-2 text-center" onclick="setLogo('Av. G')">
                                    <span class="text-[9px] font-bold">AVANT G</span>
                                    <input type="text" id="logoAvG" class="hidden" value="">
                                </div>
                                <div class="logo-selector p-2 text-center" onclick="setLogo('Av. D')">
                                    <span class="text-[9px] font-bold">AVANT D</span>
                                </div>
                                <div class="logo-selector p-2 text-center col-span-2" onclick="setLogo('Arri√®re')">
                                    <span class="text-[9px] font-bold">ARRI√àRE & TAILLE</span>
                                </div>
                            </div>
                            <input type="text" id="logoNotes" class="input-apple mt-3 text-xs" placeholder="Pr√©cisions logos...">
                        </div>

                        <textarea id="notes" class="input-apple min-h-[60px]" placeholder="Un petit mot pour l'atelier ?"></textarea>
                        
                        <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg hover:scale-[1.02] transition-transform">
                            Cr√©er la Fiche ‚ú®
                        </button>
                    </form>
                </div>
            </div>

            <div class="xl:col-span-8">
                <div id="orderList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
            </div>
        </div>
    </div>

    <script>
        let isUrgent = false;

        function toggleUrgency() {
            isUrgent = !isUrgent;
            const btn = document.getElementById('urgentBtn');
            btn.innerText = isUrgent ? "Urgence : ACTIVE" : "Urgence : OFF";
            btn.style.background = isUrgent ? "#ff3b30" : "#e5e7eb";
            btn.style.color = isUrgent ? "white" : "black";
        }

        const form = document.getElementById('orderForm');
        
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const now = new Date();
            const dateStr = now.toLocaleDateString('fr-FR').replace(/\//g, '');
            const hourStr = now.getHours() + "h" + now.getMinutes();
            const clientName = document.getElementById('client').value.toUpperCase().substring(0, 4);
            const orderId = `2026-${clientName}-${dateStr}-${hourStr}`;

            const card = document.createElement('div');
            const type = document.getElementById('type').value;
            const urgentClass = isUrgent ? 'famille-urgent' : `famille-${type}`;
            
            card.className = `apple-card p-6 shadow-xl ${urgentClass} animate-in fade-in slide-in-from-right-4 duration-500 relative overflow-hidden`;
            
            card.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <span class="text-[8px] font-black opacity-50 tracking-widest uppercase">ID: ${orderId}</span>
                        <h3 class="text-2xl font-black tracking-tight">${document.getElementById('client').value}</h3>
                        <p class="text-xs font-bold opacity-60 italic">${document.getElementById('ref').value || 'Produit'} ‚Äî ${document.getElementById('color').value || 'Couleur N/C'}</p>
                    </div>
                    ${isUrgent ? '<span class="bg-white text-red-600 font-black px-2 py-1 rounded-md text-[10px] animate-pulse">URGENT</span>' : ''}
                </div>

                <div class="bg-white/20 p-4 rounded-2xl backdrop-blur-md border border-white/10 mb-4">
                    <p class="text-[9px] font-black uppercase opacity-50 mb-2">Logos & Marquage</p>
                    <p class="text-xs font-bold uppercase leading-relaxed">${document.getElementById('logoNotes').value || 'Voir instructions standard'}</p>
                </div>

                <div class="text-[11px] font-medium leading-relaxed mb-6 italic">
                    "${document.getElementById('notes').value || 'Aucune note.'}"
                </div>

                <div class="flex justify-between items-center pt-4 border-t border-black/5">
                    <span class="text-[9px] font-black opacity-40 uppercase">${now.toLocaleString('fr-FR')}</span>
                    <button class="text-[9px] font-black uppercase opacity-40 hover:text-red-600" onclick="this.closest('.apple-card').remove()">Termin√© ‚úì</button>
                </div>
            `;

            document.getElementById('orderList').prepend(card);
            form.reset();
            if(isUrgent) toggleUrgency(); // Reset urgence apr√®s validation
        });

        function setLogo(pos) {
            document.getElementById('logoNotes').value += `[${pos}] `;
            document.getElementById('logoNotes').focus();
        }
    </script>
</body>
</html>
